<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Tue May 16 12:42:27 2017 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>pp_plot.pro (Documentation for pp_lib)</title>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="pp_plot.pro (Documentation for pp_lib)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;+</span>
<span class="comments">; :Author: Paulo Penteado (pp.penteado@gmail.com), May/2010</span>
<span class="comments">; :History: Improved on algorithm to decide on tick locations (created</span>
<span class="comments">; pp_plot_decideintervals). Jul/2011</span>
<span class="comments">; :Version: 20110722</span>
<span class="comments">;-</span>



<a id="pp_plot_decideintervals:source"></a>pro pp_plot_decideintervals,dprange,dticks,dint,decide=decide,newrange=newrange,dminor=dminor,newdticks=newdticks<span class="comments">;New algorithm</span>
compile_opt idl2,logical_predicate,hidden
  intervals=[2d0,1d0,1d0,0.5d0]<span class="comments">;,0.25d0] ;Possible interval multipliers to use</span>
  intrats=[0.2d0,0.1d0,1d0,0.5d0]<span class="comments">;,0.25d0] ;Possible normalized interval multipliers</span>
  minors=[4,10,10,5]
  nintervals=n_elements(intervals)
  ints=[6,5,4,3] <span class="comments">;Possible number of intervals</span>
  nints=n_elements(ints)
  mindiff=!values.d_infinity
  for i=0,nints-1 do begin <span class="comments">;Try every number of intervals, to find out which one gives nicer intervals</span>
    dints=double(dprange[1]-dprange[0])/ints[i]
    al=alog10(dints)
    dints=al ge 0d0 ? 1d1^((al mod 1)-1d0) : 1d1^(al mod 1)
    tmp=min(abs(dints-intrats),minloc)
    if ((tmp-mindiff) lt -(machar(/double)).eps) then begin
      mindiff=tmp
      minint=intervals[minloc]
      sints=ints[i]
      dint=intrats[minloc]*1d1^ceil(al)
      dminor=minors[minloc]
    endif
    <span class="comments">;print,ints[i],minint,tmp,sints,dint</span>
  endfor
  newrange=dint*[floor(dprange[0]/dint),ceil(dprange[1]/dint)]
  dticks=sints+1d0
  newdticks=(newrange[1]-newrange[0])/dint
end

<span class="comments">;+</span>
<span class="comments">; :Hidden: Intended to be called only by `pp_plot`</span>
<span class="comments">; :Description: Calculates the tick values, numbers, intervals and data ranges for `pp_plot` below.</span>
<span class="comments">;-</span>
<a id="pp_plot_maketicks:source"></a>pro pp_plot_maketicks,dprange,drange,d,dtickinterval,dticks,dint,dstyle,dtickv,det,yaxis=yaxis,decide=decide,dminor=dminor
compile_opt idl2,hidden
  <span class="comments">;Defaults  </span>
  yaxis=n_elements(yaxis) eq 1 ? yaxis : 0B

  print,decide ? "pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default" $
   : "pp_plot: setting tick locations (with pp_plot_decideintervals), instead of using plot's default"
  
  <span class="comments">;Get the syle flags</span>
  dexact=(dstyle and 1) eq 1
  dextend=(dstyle and 2) eq 2
  dzero=(dstyle and 16) eq 16
  <span class="comments">;Set number of ticks and interval size to match</span>
  <span class="comments">;Determine the data and plot ranges</span>
  dprange=array_equal([0d0,0d0],drange) ? [min(d,max=dmax,/nan),dmax] : drange
  if (yaxis && ~dzero && ~dexact) then dprange[0]&lt;=0d0  
  if (dtickinterval ne 0d0) then begin <span class="comments">;Interval size takes precedence over number</span>
    dticks=floor((dprange[1]-dprange[0])/dtickinterval)
    dint=dtickinterval
  endif else begin
    if (dticks eq 0) then begin
      if (~decide) then begin <span class="comments">;Old algorithm to decide on tick positions</span>
        dticks=3 <span class="comments">;Default number of ticks to use, if interval was also not provided</span>
        dint=(dprange[1]-dprange[0])/dticks
      endif else begin
        pp_plot_decideintervals,dprange,dticks,dint,decide=decide,newrange=newrange,dminor=dminor,newdticks=newdticks<span class="comments">;New algorithm</span>
        dticks--
      endelse
    endif
  endelse
  if (~dexact) then begin
    if (~decide) then begin
      dprange+=[-dint,dint] <span class="comments">;If range is not exact, add one interval to each side</span>
      dint=(dprange[1]-dprange[0])/dticks
    endif else begin
      dprange=newrange
      dticks=newdticks
    endelse
  endif
  if (~decide) then begin
    if (dextend) then dprange+=[-dint,dint]*0.5d0 else $<span class="comments">;If extend range is set, add a half interval to each side</span>
    dtickv=dprange[0]+dindgen(dticks+1)*dint
  endif else begin
    dtickv=dprange[0]+dindgen(dticks+1)*dint
    if (dextend) then dprange+=([-dint,dint]/dminor)*21d0/34d0    
  endelse
  if ~((det and 1) eq 1) then dtickv=dtickv[1:*] 
  if ~((det and 2) eq 2) then dtickv=dtickv[0:n_elements(dtickv)-2]
  dticks=n_elements(dtickv)-1
end

<span class="comments">;+</span>
<span class="comments">; :Hidden: Intended to be called only by `pp_plot`</span>
<span class="comments">; :Description:</span>
<span class="comments">;   Uses the state of `multiplot_pp` to determine `xendticks` and `yendticks`. Does</span>
<span class="comments">;   nothing to these values if a valid `multiplot_pp` state is not found.</span>
<span class="comments">;   </span>
<span class="comments">;   This code is encapsulated into this routine to keep the code insulate from the</span>
<span class="comments">;   common variables used by `multiplot_pp`.   </span>
<span class="comments">;-</span>
<a id="pp_plot_get_xyendticks:source"></a>pro pp_plot_get_xyendticks,xendticks,yendticks
compile_opt idl2,logical_predicate,hidden

common multiplot_pp $
  ,nplots $ <span class="comments">; [# of plots along x, # of plots along y]</span>
  ,nleft $  <span class="comments">; # of plots remaining---like the first element of !p.multi</span>
  ,pdotmulti $  <span class="comments">; saved value of !p.multi</span>
  ,margins $  <span class="comments">; calculated margins based on !p.multi or pmulti</span>
  ,pposition $  <span class="comments">; saved value of !p.position</span>
  ,colmajor $ <span class="comments">; flag for column major order</span>
  ,noerase $  <span class="comments">; saved value of !p.noerase</span>
  ,xtickname $  <span class="comments">; Original value</span>
  ,ytickname $  <span class="comments">; Original value</span>
  ,xtickformat $<span class="comments">; Original value</span>
  ,ytickformat,$  <span class="comments">; Original value</span>
  ontop,onright <span class="comments">;Whether the current plot will be on the bottom line or the left column</span>

<span class="comments">;Get out if the multiplot variables were not defined</span>
if n_elements(ontop) eq 0 then return

<span class="comments">;Set x|yendticks according to the plot location on the grid</span>
xendticks=onright ? 3 : 1
yendticks=ontop ? 3 : 1

print,'pp_plot: setting xendticks to ',strtrim(xendticks,2),' and yendticks to ',strtrim(yendticks,2)

end


<span class="comments">;+</span>
<span class="comments">; :Description:</span>
<span class="comments">;    Wrapper to IDL's plot procedure, to allow supressing the first and/or last tick values, so </span>
<span class="comments">;    that they do not overlap with neighbouring plots (particularly if using `multiplot_pp`).</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;    x : in, required</span>
<span class="comments">;      Passed to IDL's plot, see its help. Used to determine the x range if xrange is not provided (or the</span>
<span class="comments">;      y range if y is not provided).</span>
<span class="comments">;    y : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help. Used to determine the y range if yrange is not provided.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    use_multiplot : in, optional, default=0</span>
<span class="comments">;      If set, `xendticks` and `yendticks` are determined by the plot's position</span>
<span class="comments">;      in the grid set by `multiplot_pp`: Plots not on the top row get the top</span>
<span class="comments">;      y tick suppressed (`yendticks`=1), plots not on the right column get the right</span>
<span class="comments">;      x tick suppressed (`xendticks`=1).</span>
<span class="comments">;    calculate_ticks : in, optional, default=0</span>
<span class="comments">;      If set and tick values are not provided, the tick values are defined here,</span>
<span class="comments">;      instead of letting IDL's plot do it. Useful to keep plots with ticks suppressed</span>
<span class="comments">;      (in which case auto tick locations are calculated here) consistent with those</span>
<span class="comments">;      made with no suppresion (which otherwise would have their ticks determined by IDL's</span>
<span class="comments">;      plot).</span>
<span class="comments">;    xendticks : in, optional, default=3</span>
<span class="comments">;      Its value determines the kind of supression of the end ticks for the x axis:</span>
<span class="comments">;      </span>
<span class="comments">;      0 - No end ticks are printed (both the first and last are supressed).</span>
<span class="comments">;      </span>
<span class="comments">;      1 - Only the last is supressed, the first tick is left untouched.</span>
<span class="comments">;      </span>
<span class="comments">;      2 - Only the first is supressed, the last tick is left untouched.</span>
<span class="comments">;      </span>
<span class="comments">;      3  - No supression, this routine just passes its arguments to plot, with no changes. </span>
<span class="comments">;    yendticks : in, optional, default=3</span>
<span class="comments">;      Its value determines the kind of supression of the end ticks for the y axis:</span>
<span class="comments">;      </span>
<span class="comments">;      0 - No end ticks are printed (both the first and last are supressed).</span>
<span class="comments">;      </span>
<span class="comments">;      1 - Only the last is supressed, the first tick is left untouched.</span>
<span class="comments">;      </span>
<span class="comments">;      2 - Only the first is supressed, the last tick is left untouched.</span>
<span class="comments">;      </span>
<span class="comments">;      3  - No supression, this routine just passes its arguments to plot, with no changes.</span>
<span class="comments">;    _extra : in, optional</span>
<span class="comments">;      Any other keywords are just passed to plot, unaltered.</span>
<span class="comments">;    xrange : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    xtickv : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    xticks : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    xtickinterval : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    xstyle : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    xtick_get : out, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    yrange : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    ytickv : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    yticks : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    ytickinterval : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    ystyle : in, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;    ytick_get : out, optional</span>
<span class="comments">;      Passed to IDL's plot, see its help.</span>
<span class="comments">;      </span>
<span class="comments">; :Examples:</span>
<span class="comments">;   To make a plot supressing both end marks on x, but supress only the bottom mark on y::</span>
<span class="comments">;   </span>
<span class="comments">;     pp_plot,dindgen(10),dindgen(10)*2,xendticks=0,yendticks=2,xstyle=1,ystyle=1,xticks=5,xminor=4</span>
<span class="comments">;     ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;     ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;   </span>
<span class="comments">;   To make multiplots (using `multiplot_pp`, a variation of IDLastro's multiplot) where the end marks do not overlap::</span>
<span class="comments">;   </span>
<span class="comments">;      multiplot_pp,[2,2]</span>
<span class="comments">;      pp_plot,[0,1],[0,1],xstyle=1,ystyle=1,/use_multiplot,/calculate_ticks</span>
<span class="comments">;      ;pp_plot: setting xendticks to 1 and yendticks to 3</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      multiplot_pp</span>
<span class="comments">;      pp_plot,[0,1],[0,1],xstyle=1,ystyle=1,/use_multiplot,/calculate_ticks</span>
<span class="comments">;      ;pp_plot: setting xendticks to 3 and yendticks to 3</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      multiplot_pp</span>
<span class="comments">;      pp_plot,[0,1],[0,1],xstyle=1,ystyle=1,/use_multiplot,/calculate_ticks</span>
<span class="comments">;      ;pp_plot: setting xendticks to 1 and yendticks to 1</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      multiplot_pp</span>
<span class="comments">;      pp_plot,[0,1],[0,1],xstyle=1,ystyle=1,/use_multiplot,/calculate_ticks</span>
<span class="comments">;      ;pp_plot: setting xendticks to 3 and yendticks to 1</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      ;pp_plot: setting tick locations (with pp_plot_maketicks), instead of using plot's default</span>
<span class="comments">;      </span>
<span class="comments">;</span>
<span class="comments">; :Author: Paulo Penteado (pp.penteado@gmail.com), May/2010</span>
<span class="comments">; </span>
<span class="comments">; :History:</span>
<span class="comments">;    Added the keywords `use_multiplot` and `calculate_ticks`. Apr/2011.</span>
<span class="comments">;-</span>
<a id="pp_plot:source"></a>pro pp_plot,x,y,xendticks=xet,yendticks=yet,_extra=ex, $
 xrange=ixrange,xtickv=ixtickv,xticks=xticks,xtickinterval=ixtickinterval,xstyle=xstyle,xtick_get=xtick_get,xminor=xminor, $
 yrange=iyrange,ytickv=iytickv,yticks=yticks,ytickinterval=iytickinterval,ystyle=ystyle,ytick_get=ytick_get,yminor=yminor, $
 use_multiplot=usemult,calculate_ticks=calcticks
compile_opt idl2

<span class="comments">;Defaults</span>
xet=n_elements(xet) eq 1 ? xet : 3
yet=n_elements(yet) eq 1 ? yet : 3
usemult=n_elements(usemult) eq 1 ? usemult : 0B
calcticks=n_elements(calcticks) eq 1 ? calcticks : 0B

<span class="comments">;Auto set xendticks and yendticks according to what multiplot_pp is doing</span>
if usemult then pp_plot_get_xyendticks,xet,yet
  
<span class="comments">;Do nothing special if xet and yet are both 3 and no ticks are set here </span>
if ((xet eq 3) && (yet eq 3) && (~ calcticks)) then begin
  plot,x,y,_extra=ex, $
   xrange=ixrange,xtickv=ixtickv,xticks=xticks,xtickinterval=ixtickinterval,xstyle=xstyle,xtick_get=xtick_get, $
   yrange=iyrange,ytickv=iytickv,yticks=yticks,ytickinterval=iytickinterval,ystyle=ystyle,ytick_get=ytick_get
  return
endif

<span class="comments">;Get the relevant keywords to use</span>
if (xet ne 3)||calcticks then begin
  xtickv=n_elements(ixtickv) ne 0 ? double(ixtickv) : !x.tickv
  xticks=n_elements(xticks) eq 1 ? xticks : !x.ticks
  xtickinterval=n_elements(ixtickinterval) eq 1 ? double(ixtickinterval) : !x.tickinterval
  xstyle=n_elements(xstyle) eq 1 ? xstyle : !x.style
  xsupress=(xstyle and 4) eq 4
  xrange=n_elements(ixrange) eq 2 ? double(ixrange) : !x.range
  xt0=array_equal(xtickv,replicate(0,n_elements(xtickv)))
  xminor=n_elements(xminor) eq 1 ? xminor : !x.minor
endif
if (yet ne 3)||calcticks then begin
  ytickv=n_elements(iytickv) ne 0 ? double(iytickv) : !y.tickv
  yticks=n_elements(yticks) eq 1 ? yticks : !y.ticks
  ytickinterval=n_elements(iytickinterval) eq 1 ? double(iytickinterval) : !y.tickinterval
  ystyle=n_elements(ystyle) eq 1 ? ystyle : !y.style
  ysupress=(ystyle and 4) eq 4
  yrange=n_elements(iyrange) eq 2 ? double(iyrange) : !y.range
  yt0=array_equal(ytickv,replicate(0,n_elements(ytickv)))
  yminor=n_elements(yminor) eq 1 ? yminor : !y.minor
endif

<span class="comments">;Make the xticks if they were not provided</span>
if (n_elements(y) gt 0) then begin <span class="comments">;If both x and y were provided</span>
  <span class="comments">;X axis</span>
  if (calcticks || (xet ne 3))&&xt0 then $
   pp_plot_maketicks,xprange,xrange,double(x),xtickinterval,xticks,xint,xstyle,xtickv,xet,decide=calcticks,dminor=xminor
  <span class="comments">;Y axis</span>
  if (calcticks || (yet ne 3))&&yt0 then $
   pp_plot_maketicks,yprange,yrange,double(y),ytickinterval,yticks,yint,ystyle,ytickv,yet,/yaxis,decide=calcticks,dminor=yminor
endif else begin <span class="comments">;If only x is provided, in which case it is interpreted as y, and x is an index array.</span>
  <span class="comments">;X axis</span>
  if (calcticks || (xet ne 3))&&xt0 then $
   pp_plot_maketicks,xprange,xrange,dindgen(n_elements(x)),xtickinterval,xticks,xint,xstyle,xtickv,xet,decide=calcticks,dminor=xminor
  <span class="comments">;Y axis</span>
  if (calcticks || (yet ne 3))&&yt0 then $
   pp_plot_maketicks,yprange,yrange,double(x),ytickinterval,yticks,yint,ystyle,ytickv,yet,/yaxis,decide=calcticks,dminor=yminor
endelse

if calcticks||(((xet ne 3) && (yet ne 3))) then $ <span class="comments">;If both x and y ticks were set here</span>
 plot,x,y,_extra=ex, $
 xrange=n_elements(xprange) eq 2 ? xprange : xrange,xtickv=xtickv,xticks=xticks,xtickinterval=xtickinterval,xtick_get=xtick_get,xminor=xminor,xstyle=(xstyle or 1) and (not 2), $
 yrange=n_elements(yprange) eq 2 ? yprange : yrange,ytickv=ytickv,yticks=yticks,ytickinterval=ytickinterval,ytick_get=ytick_get,yminor=yminor,ystyle=(ystyle or 1) and (not 2)
if ((xet ne 3) && (yet eq 3)) then $ <span class="comments">;If only x ticks were set here</span>
 plot,x,y,_extra=ex, $
 xrange=n_elements(xprange) eq 2 ? xprange : xrange,xtickv=xtickv,xticks=xticks,xtickinterval=xtickinterval,xtick_get=xtick_get,xminor=xminor,xstyle=(xstyle or 1) and (not 2), $
 yrange=iyrange,ytickv=iytickv,yticks=yticks,ytickinterval=iytickinterval,ystyle=ystyle,ytick_get=ytick_get
if ((xet eq 3) && (yet ne 3)) then $ <span class="comments">;If only y ticks were set here</span>
 plot,x,y,_extra=ex, $
 xrange=ixrange,xtickv=ixtickv,xticks=xticks,xtickinterval=ixtickinterval,xstyle=xstyle,xtick_get=xtick_get, $
 yrange=n_elements(yprange) eq 2 ? yprange : yrange,ytickv=ytickv,yticks=yticks,ytickinterval=ytickinterval,ytick_get=ytick_get,yminor=yminor,ystyle=(ystyle or 1) and (not 2)


end

</code>
    </div>
  </body>
</html>